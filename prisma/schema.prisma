generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model UserStatus {
  id   Int    @id @default(autoincrement()) @map("id_user_status")
  name String @unique @map("name_user_status")

  users User[]
}

model User {
  id       String @id @default(uuid()) @map("id_user")
  username String @unique @map("username_user")
  password String @map("password_user")

  status   UserStatus @relation(fields: [statusId], references: [id])
  statusId Int        @map("status_id_user")
  role     Role       @relation(fields: [roleId], references: [id])
  roleId   Int        @map("role_id_user")
  person   Person?
  profile  Profile?
}

model Role {
  id    Int    @id @default(autoincrement()) @map("id_role")
  name  String @unique @map("name_role")
  users User[]
}

model Profile {
  id        Int      @id @default(autoincrement()) @map("id_profile")
  birthDate DateTime @map("birth_date_profile")
  phone     String   @map("phone_profile")
  photo     String   @map("photo_profile")

  user   User   @relation(fields: [userId], references: [id])
  userId String @unique @map("user_id_profile")
}

model Person {
  id       Int    @id @default(autoincrement()) @map("id_person")
  fullName String @unique @map("full_name_person")
  email    String @unique @map("email_person")

  program   Program @relation(fields: [programId], references: [id])
  programId Int     @map("program_id_person")
  user      User    @relation(fields: [userId], references: [id])
  userId    String  @unique @map("user_id_person")
}

model Faculty {
  id   Int    @id @default(autoincrement()) @map("id_faculty")
  name String @unique @map("name_faculty")

  programs Program[]
}

model Program {
  id   Int    @id @default(autoincrement()) @map("id_program")
  name String @unique @map("name_program")

  faculty   Faculty  @relation(fields: [facultyId], references: [id])
  facultyId Int      @map("faculty_id_program")
  persons   Person[]
}
